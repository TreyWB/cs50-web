{% extends "auctions/layout.html" %}

{% block body %}
    <div class="listing-info">
        <h2>{{ listing.title }}</h2>
        <p>Category: {{ listing.category }}</p>
        <p>Posted By: {{ listing.user }}</p>

        {% if listing.photo %}
        <img src="{{ listing.photo }}" alt="Phtoto of {{ listing.title }}">
        {% endif %}

        <p>${{ listing.get_current_bid }}</p>

        <br>

        <p>{{ listing.description }}</p>
        <p>Watchlist Count: {{ listing.watchlist_count }}</p>

    </div>

    <!-- <div class="bid-form">
        <form action="{% url 'create_listing' %}" method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="Create Listing">
        </form>
    </div> -->

    <div class="bid-form">
        <form action="{% url 'new_bid' %}" method="POST">
            {% csrf_token %}
            {{ form.as_p }}
            <input type="submit" value="Bid">
        </form>
    </div>


    <div class="buttons">

        <div id="edit">
            <form action="{% url 'edit_listing' %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="Edit Listing">
            </form>
        </div>

        <br>


        <!-- TODO: On 1st button press, add to watchlist -->
        <!-- TODO: On 2nd button press, remove from watchlist -->
        <div id="watchlist">
            <form action="{% url 'watchlist-added' %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="Add to Watchlist">
                <p>{{ listing.watchlist_count }}</p>
            </form>
        </div>

    </div>
{% endblock %}